{% extends "base.html" %}

{% block title %}{% endblock %}

{% block content %}

<style>
    .container {
        max-width: 600px;
        margin: 40px auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        background-color: #fff;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    h1 {
        font-size: 24px;
        margin-bottom: 10px;
    }
    .post-type {
        color: #555;
        margin-bottom: 20px;
    }
    .form-group {
        margin-bottom: 15px;
        display: flex;
        flex-direction: column;
    }
    .form-group label {
        margin-bottom: 5px;
        font-weight: bold;
    }
    .form-group input, 
    .form-group textarea, 
    .form-group select {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 14px;
        width: 100%;
        box-sizing: border-box;
    }
    .btn {
        padding: 10px 15px;
        border: none;
        border-radius: 5px;
        font-size: 14px;
        cursor: pointer;
        margin-top: 10px;
    }
    .btn-primary {
        background-color: #007bff;
        color: #fff;
    }
    .btn-primary:hover {
        background-color: #0056b3;
    }
    .btn-secondary {
        background-color: #6c757d;
        color: #fff;
    }
    .btn-secondary:hover {
        background-color: #5a6268;
    }
    .button-group {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .small-text {
        font-size: 12px;
        color: #888;
        margin-top: 2px;
    }
</style>

    <div class="container mx-auto p-6 max-w-lg bg-white rounded-xl shadow-md">
        <h1 class="text-2xl font-bold mb-4 text-gray-800">ส่งคำขอสำหรับ: {{ post.title }}</h1>
        {%if post.image %}
            <img src="{{ post.image.url }}" alt="{{ post.title }}" class="w-full h-64 object-cover rounded-lg mb-4">
        {% endif %}
        <div class="mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
            {% if post.post_type == 'buy_sell' %}
                {% if post.is_buying %}
                    <p class="post-type text-pink-600">
                        ประเภทคำขอ: <strong>เสนอขาย (Wishlist)</strong>
                        <br><span class="text-sm text-gray-500">ผู้โพสต์ต้องการซื้อ คุณกำลังเสนอขาย</span>
                    </p>
                {% else %}
                    <p class="post-type text-green-600">
                        ประเภทคำขอ: <strong>ขอซื้อสินค้า</strong>
                        <br><span class="text-sm text-gray-500">ผู้โพสต์ต้องการขาย คุณกำลังขอซื้อ</span>
                    </p>
                {% endif %}

            {% elif post.post_type == 'swap' %}
                <p class="post-type text-blue-600">ประเภทคำขอ: <strong>แลกเปลี่ยนของ</strong></p>

            {% elif post.post_type == 'donate' or post.post_type == 'donation' %}
                <p class="post-type text-purple-600">ประเภทคำขอ: <strong>เสนอรับ</strong></p>
            {% endif %}
        </div>

        <form method="post" class="space-y-4">
            {% csrf_token %}
            {{ form.as_p }}
            
            <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition">
                ยืนยันการส่งคำขอ
            </button>
        </form>
    </div>

    <div class="button-group">
        {% if post.post_type == 'swap' %}
            <a href="{% url 'post_create' post_type='swap' %}?next={{ post.id }}">
                <button type="button" class="btn btn-secondary">สร้างโพสต์ใหม่สำหรับแลกเปลี่ยน</button>
            </a>
            <p class="small-text">หากคุณต้องการแลกเปลี่ยนแต่ยังไม่มีโพสต์ที่เหมาะสม</p>
        {% endif %}

        <a href="{% url 'post_detail' pk=post.id %}">
            <button type="button" class="btn btn-secondary">กลับสู่หน้าโพสต์</button>
        </a>
    </div>
</div>

{% endblock %}